(this["webpackJsonpd3-react-playground"]=this["webpackJsonpd3-react-playground"]||[]).push([[0],{132:function(e,t,n){},137:function(e,t,n){},175:function(e,t,n){"use strict";n.r(t);n(132);var a=n(0),i=n.n(a),c=n(35),r=n.n(c),s=n(9),l=(n(137),n(3)),o=n(20),u=n(21),h=n(25),d=n(67),m=n.n(d),f=n(1),j=[{name:"Top Level",attributes:{keyA:"val A",keyB:"val B",keyC:"val C"},children:[{name:"Level 2: A",attributes:{keyA:"val A",keyB:"val B",keyC:"val C"}},{name:"Level 2: B",children:[{name:"Level 3: A"},{name:"Level 3: B"},{name:"Level 3: C"},{name:"Level 3: D"}]},{name:"Level 2: C"},{name:"Level 2: D"},{name:"Level 2: E"},{name:"Level 2: F"},{name:"Level 2: G"},{name:"Level 2: H"},{name:"Level 2: I"},{name:"Level 2: J",children:[{name:"Level 3: E"},{name:"Level 3: F"},{name:"Level 3: G"},{name:"Level 3: H"}]},{name:"Level 2: K"}]}],b=function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){return Object(f.jsx)("div",{id:"treeWrapper",style:{width:"100%",height:"100%"},children:Object(f.jsx)(m.a,{data:j})})}}]),n}(i.a.Component),p=n(26),v=function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).state={loading:!0,formValid:!0,data:[{name:"ProjectA",parent:""},{name:"ApplicationA",parent:"ProjectA"},{name:"EnvironmentB",parent:"ProjectA"},{name:"TierC",parent:"ApplicationA"},{name:"TierD",parent:"ApplicationA"},{name:"TierE",parent:"ApplicationA"},{name:"ServiceF",parent:"EnvironmentB"},{name:"ContainerG",parent:"EnvironmentB"},{name:"ContainerH",parent:"TierE"},{name:"ContainerH",parent:"TierE"},{name:"ContainerH",parent:"TierE"},{name:"ContainerH",parent:"TierE"},{name:"ContainerH",parent:"TierE"},{name:"ContainerH",parent:"TierE"}]},a}return Object(o.a)(n,[{key:"componentDidMount",value:function(){console.log(this.state.data);var e=p.c().size([800,640]),t=p.b().id((function(e){return e.name})).parentId((function(e){return e.parent}));console.log(t);var n=t(this.state.data).sort((function(e,t){return e.height-t.height||e.id.localeCompare(t.id)}));this.setState({paths:e(n).links()}),this.setState({nodes:n.descendants()})}},{key:"render",value:function(){var e=this,t=this.state.paths&&this.state.paths.map((function(e){var t=p.a().x((function(e){return e.y})).y((function(e){return e.x}));return Object(f.jsx)("path",{className:"link",d:t(e)})})),n=this.state.nodes&&this.state.nodes.map((function(e,t){return Object(f.jsxs)("g",{className:" node--internal",transform:"translate(".concat(e.y,", ").concat(e.x,")"),children:[Object(f.jsx)("circle",{r:"10",style:{fill:e.children?"lightsteelblue":"black"}}),Object(f.jsx)("text",{y:"0",dy:"0",textAnchor:"middle",style:{fillOpacity:1},children:e.name})]},e.id)}));return Object(f.jsx)("svg",{className:"tree-chart-basic",ref:function(t){return e.chartRf=t},style:{width:"800px",height:"800px"},children:Object(f.jsxs)("g",{transform:"translate(20,20)",children:[n,t]})})}}]),n}(a.Component),x=n(38),O=i.a.createContext(null),g=function(e){var t=Object(a.useRef)(null),n=Object(a.useState)({}),i=Object(s.a)(n,2),c=i[0],r=i[1],l=Object(a.useState)(null),o=Object(s.a)(l,2),u=o[0],h=o[1];Object(a.useEffect)((function(){r(t.current.getBoundingClientRect())}),[]),Object(a.useEffect)((function(){return window.addEventListener("resize",d),function(){window.removeEventListener("resize",d)}}),[]);var d=function(){clearTimeout(u),h(setTimeout((function(){r(t.current.getBoundingClientRect())}),e.debounce))};return Object(f.jsx)("div",{ref:t,style:{height:"100%"},children:Object(f.jsx)(O.Provider,{value:c,children:e.children})})};g.defaultProps={debounce:100};var y,A=n(177),C=(n(6),function e(t,n,a){var i=this;Object(l.a)(this,e),this.updateData=function(e){i.data=e,i.allCircles=i.chart.selectAll(".myCircle").data(i.data),i.allCircles.transition().duration(500).attr("cx",(function(e,t){return i.scales.xScale(t)})).attr("cy",(function(e){return i.scales.yScale(e)})).attr("fill","orange"),i.enter()},this.enter=function(){i.allCircles.enter().append("circle").attr("class","myCircle").attr("cx",(function(e,t){return i.scales.xScale(t)})).attr("cy",(function(e){return i.scales.yScale(e)})).attr("r",10).attr("fill","green"),i.exit()},this.exit=function(){i.allCircles.exit().remove()},this.updateScales=function(e){i.scales=e,i.allCircles=i.chart.selectAll(".myCircle").transition().duration(500).attr("cx",(function(e,t){return i.scales.xScale(t)})).attr("cy",(function(e){return i.scales.yScale(e)}))},this.chart=t,this.scales=a,this.updateData(n)}),L=n(180),S=function e(t,n,a){var i=this;Object(l.a)(this,e),this.createAxes=function(e,t,n){i.scaleAxes(t,n),i.xAxisBottomG=e.append("g").attr("transform","translate(0, ".concat(n.innerHeight,")")).call(i.xAxisBottom),i.yAxisLeftG=e.append("g").call(i.yAxisLeft)},this.scaleAxes=function(e,t){i.xAxisBottom=Object(L.a)().scale(e.xScale).tickSize(-t.innerHeight),i.yAxisLeft=Object(L.b)().scale(e.yScale).tickSize(-t.innerWidth)},this.updateAxes=function(e,t){i.scaleAxes(e,t),i.xAxisBottomG.attr("transform","translate(0, ".concat(t.innerHeight,")")).call(i.xAxisBottom),i.yAxisLeftG.call(i.yAxisLeft)},this.createAxes(t,n,a)},E=function e(t){var n=this;Object(l.a)(this,e),this.setMargin=function(){n.margin={top:20,left:30,bottom:20,right:30}},this.setDims=function(e){var t=e.width,a=e.height;n.width=t,n.height=a,n.setInnerDims()},this.setInnerDims=function(){n.innerHeight=n.height-(n.margin.top+n.margin.bottom),n.innerWidth=n.width-(n.margin.left+n.margin.right)},this.setMargin(),this.setDims(t),this.setInnerDims()},k=n(178),D=function e(t,n){var a=this;Object(l.a)(this,e),this.setScales=function(e,t){a.xScale=Object(k.a)().domain([0,9]).range([0,t.innerWidth]),a.yScale=Object(k.a)().domain([0,10]).range([t.innerHeight,0])},this.setScales(t,n)},w=function e(t){var n=this;Object(l.a)(this,e),this.init=function(e,t){n.data=e,console.log(e),n.dims=new E(t),n.chart=n.svg.append("g"),n.chart.attr("stroke","#f02").attr("stroke-opacity",.4).attr("stroke-width",1.5),n.chart.attr("transform","translate(".concat(n.dims.margin.left,", ").concat(n.dims.margin.top,")")),n.scales=new D(n.data,n.dims),n.axes=new S(n.chart,n.scales,n.dims),n.circles=new C(n.chart,n.data,n.scales)},this.updateData=function(e){n.circles.updateData(e)},this.updateDims=function(e){n.dims.setDims(e),n.scales.setScales(n.data,n.dims),n.axes.updateAxes(n.scales,n.dims),n.circles.updateScales(n.scales)},this.svg=Object(A.a)(t).append("svg"),this.svg.attr("width","100%").attr("height","100%")},B={display:"grid",height:"100%"},T=(y=function(e){var t=e.dims,n=e.data,i=Object(a.useRef)(null),c=Object(a.useState)(null),r=Object(s.a)(c,2),l=r[0],o=r[1],u=Object(a.useState)(!1),h=Object(s.a)(u,2),d=h[0],m=h[1];return Object(a.useEffect)((function(){o((function(){return new w(i.current)}))}),[]),Object(a.useEffect)((function(){d&&l.updateDims(t)}),[t]),Object(a.useEffect)((function(){d&&l.updateData(n)}),[n]),Object(a.useEffect)((function(){n.length&&t.width&&!1===d&&(l.init(n,t),m((function(){return!0})))}),[n,t]),Object(f.jsx)("div",{ref:i,style:B})},function(e){return Object(f.jsx)(O.Consumer,{children:function(t){return Object(f.jsx)(y,Object(x.a)(Object(x.a)({},e),{},{dims:t}))}})}),H={name:"root",children:[{name:"child #1"},{name:"child #2",children:[{name:"grandchild #1"},{name:"grandchild #2"},{name:"grandchild #3"}]}]};var G=function(){var e=Object(a.useState)([]),t=Object(s.a)(e,2),n=t[0],i=t[1],c=function(){for(var e=[],t=0;t<10;t++)e.push(Math.round(10*Math.random()));i(e)};return Object(a.useEffect)((function(){return c()}),[]),Object(f.jsx)("div",{className:"myLayout",children:Object(f.jsx)("div",{className:"coolThing",children:Object(f.jsxs)(g,{children:[Object(f.jsx)("h1",{children:"Dynamic SVG loader"}),Object(f.jsx)("button",{onClick:c,children:"update data"}),Object(f.jsx)(T,{data:n}),Object(f.jsx)("h1",{children:"Calculate in D3, Render in React"}),Object(f.jsx)(v,{data:H}),Object(f.jsx)("h1",{children:"Interactive tree"}),Object(f.jsx)(b,{})]})})})},I=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,182)).then((function(t){var n=t.getCLS,a=t.getFID,i=t.getFCP,c=t.getLCP,r=t.getTTFB;n(e),a(e),i(e),c(e),r(e)}))};r.a.render(Object(f.jsx)(i.a.StrictMode,{children:Object(f.jsx)(G,{})}),document.getElementById("root")),I()}},[[175,1,2]]]);
//# sourceMappingURL=main.25f8be17.chunk.js.map