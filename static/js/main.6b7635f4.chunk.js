(this["webpackJsonpd3-react-playground"]=this["webpackJsonpd3-react-playground"]||[]).push([[0],{132:function(t,e,n){},137:function(t,e,n){},175:function(t,e,n){"use strict";n.r(e);n(132);var a=n(0),i=n.n(a),c=n(35),r=n.n(c),s=n(9),l=(n(137),n(3)),o=n(20),u=n(21),h=n(25),d=n(67),f=n.n(d),m=n(1),j=[{name:"Top Level",attributes:{keyA:"val A",keyB:"val B",keyC:"val C"},children:[{name:"Level 2: A",attributes:{keyA:"val A",keyB:"val B",keyC:"val C"}},{name:"Level 2: B"}]}],b=function(t){Object(u.a)(n,t);var e=Object(h.a)(n);function n(){return Object(l.a)(this,n),e.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){return Object(m.jsx)("div",{id:"treeWrapper",style:{width:"100%",height:"100%"},children:Object(m.jsx)(f.a,{data:j})})}}]),n}(i.a.Component),p=n(26),x=function(t){Object(u.a)(n,t);var e=Object(h.a)(n);function n(t){var a;return Object(l.a)(this,n),(a=e.call(this,t)).state={loading:!0,formValid:!0,data:[{name:"ProjectA",parent:""},{name:"ApplicationA",parent:"ProjectA"},{name:"EnvironmentB",parent:"ProjectA"},{name:"TierC",parent:"ApplicationA"},{name:"TierD",parent:"ApplicationA"},{name:"TierE",parent:"ApplicationA"},{name:"ServiceF",parent:"EnvironmentB"},{name:"ContainerG",parent:"EnvironmentB"},{name:"ContainerH",parent:"TierE"},{name:"ContainerH",parent:"TierE"},{name:"ContainerH",parent:"TierE"},{name:"ContainerH",parent:"TierE"},{name:"ContainerH",parent:"TierE"},{name:"ContainerH",parent:"TierE"}]},a}return Object(o.a)(n,[{key:"componentDidMount",value:function(){console.log(this.state.data);var t=p.c().size([800,640]),e=p.b().id((function(t){return t.name})).parentId((function(t){return t.parent}));console.log(e);var n=e(this.state.data).sort((function(t,e){return t.height-e.height||t.id.localeCompare(e.id)}));this.setState({paths:t(n).links()}),this.setState({nodes:n.descendants()})}},{key:"render",value:function(){var t=this,e=this.state.paths&&this.state.paths.map((function(t){var e=p.a().x((function(t){return t.y})).y((function(t){return t.x}));return Object(m.jsx)("path",{className:"link",d:e(t)})})),n=this.state.nodes&&this.state.nodes.map((function(t,e){return Object(m.jsxs)("g",{className:" node--internal",transform:"translate(".concat(t.y,", ").concat(t.x,")"),children:[Object(m.jsx)("circle",{r:"10",style:{fill:t.children?"lightsteelblue":"black"}}),Object(m.jsx)("text",{y:"0",dy:"0",textAnchor:"middle",style:{fillOpacity:1},children:t.name})]},t.id)}));return Object(m.jsx)("svg",{className:"tree-chart-basic",ref:function(e){return t.chartRf=e},style:{width:"800px",height:"800px"},children:Object(m.jsxs)("g",{transform:"translate(20,20)",children:[n,e]})})}}]),n}(a.Component),O=n(38),g=i.a.createContext(null),v=function(t){var e=Object(a.useRef)(null),n=Object(a.useState)({}),i=Object(s.a)(n,2),c=i[0],r=i[1],l=Object(a.useState)(null),o=Object(s.a)(l,2),u=o[0],h=o[1];Object(a.useEffect)((function(){r(e.current.getBoundingClientRect())}),[]),Object(a.useEffect)((function(){return window.addEventListener("resize",d),function(){window.removeEventListener("resize",d)}}),[]);var d=function(){clearTimeout(u),h(setTimeout((function(){r(e.current.getBoundingClientRect())}),t.debounce))};return Object(m.jsx)("div",{ref:e,style:{height:"100%"},children:Object(m.jsx)(g.Provider,{value:c,children:t.children})})};v.defaultProps={debounce:100};var y,A=n(177),C=(n(6),function t(e,n,a){var i=this;Object(l.a)(this,t),this.updateData=function(t){i.data=t,i.allCircles=i.chart.selectAll(".myCircle").data(i.data),i.allCircles.transition().duration(500).attr("cx",(function(t,e){return i.scales.xScale(e)})).attr("cy",(function(t){return i.scales.yScale(t)})).attr("fill","orange"),i.enter()},this.enter=function(){i.allCircles.enter().append("circle").attr("class","myCircle").attr("cx",(function(t,e){return i.scales.xScale(e)})).attr("cy",(function(t){return i.scales.yScale(t)})).attr("r",10).attr("fill","green"),i.exit()},this.exit=function(){i.allCircles.exit().remove()},this.updateScales=function(t){i.scales=t,i.allCircles=i.chart.selectAll(".myCircle").transition().duration(500).attr("cx",(function(t,e){return i.scales.xScale(e)})).attr("cy",(function(t){return i.scales.yScale(t)}))},this.chart=e,this.scales=a,this.updateData(n)}),S=n(180),k=function t(e,n,a){var i=this;Object(l.a)(this,t),this.createAxes=function(t,e,n){i.scaleAxes(e,n),i.xAxisBottomG=t.append("g").attr("transform","translate(0, ".concat(n.innerHeight,")")).call(i.xAxisBottom),i.yAxisLeftG=t.append("g").call(i.yAxisLeft)},this.scaleAxes=function(t,e){i.xAxisBottom=Object(S.a)().scale(t.xScale).tickSize(-e.innerHeight),i.yAxisLeft=Object(S.b)().scale(t.yScale).tickSize(-e.innerWidth)},this.updateAxes=function(t,e){i.scaleAxes(t,e),i.xAxisBottomG.attr("transform","translate(0, ".concat(e.innerHeight,")")).call(i.xAxisBottom),i.yAxisLeftG.call(i.yAxisLeft)},this.createAxes(e,n,a)},E=function t(e){var n=this;Object(l.a)(this,t),this.setMargin=function(){n.margin={top:20,left:30,bottom:20,right:30}},this.setDims=function(t){var e=t.width,a=t.height;n.width=e,n.height=a,n.setInnerDims()},this.setInnerDims=function(){n.innerHeight=n.height-(n.margin.top+n.margin.bottom),n.innerWidth=n.width-(n.margin.left+n.margin.right)},this.setMargin(),this.setDims(e),this.setInnerDims()},w=n(178),D=function t(e,n){var a=this;Object(l.a)(this,t),this.setScales=function(t,e){a.xScale=Object(w.a)().domain([0,9]).range([0,e.innerWidth]),a.yScale=Object(w.a)().domain([0,10]).range([e.innerHeight,0])},this.setScales(e,n)},B=function t(e){var n=this;Object(l.a)(this,t),this.init=function(t,e){n.data=t,console.log(t),n.dims=new E(e),n.chart=n.svg.append("g"),n.chart.attr("stroke","#f02").attr("stroke-opacity",.4).attr("stroke-width",1.5),n.chart.attr("transform","translate(".concat(n.dims.margin.left,", ").concat(n.dims.margin.top,")")),n.scales=new D(n.data,n.dims),n.axes=new k(n.chart,n.scales,n.dims),n.circles=new C(n.chart,n.data,n.scales)},this.updateData=function(t){n.circles.updateData(t)},this.updateDims=function(t){n.dims.setDims(t),n.scales.setScales(n.data,n.dims),n.axes.updateAxes(n.scales,n.dims),n.circles.updateScales(n.scales)},this.svg=Object(A.a)(e).append("svg"),this.svg.attr("width","100%").attr("height","100%")},T={display:"grid",height:"100%"},L=(y=function(t){var e=t.dims,n=t.data,i=Object(a.useRef)(null),c=Object(a.useState)(null),r=Object(s.a)(c,2),l=r[0],o=r[1],u=Object(a.useState)(!1),h=Object(s.a)(u,2),d=h[0],f=h[1];return Object(a.useEffect)((function(){o((function(){return new B(i.current)}))}),[]),Object(a.useEffect)((function(){d&&l.updateDims(e)}),[e]),Object(a.useEffect)((function(){d&&l.updateData(n)}),[n]),Object(a.useEffect)((function(){n.length&&e.width&&!1===d&&(l.init(n,e),f((function(){return!0})))}),[n,e]),Object(m.jsx)("div",{ref:i,style:T})},function(t){return Object(m.jsx)(g.Consumer,{children:function(e){return Object(m.jsx)(y,Object(O.a)(Object(O.a)({},t),{},{dims:e}))}})}),H={name:"root",children:[{name:"child #1"},{name:"child #2",children:[{name:"grandchild #1"},{name:"grandchild #2"},{name:"grandchild #3"}]}]};var I=function(){var t=Object(a.useState)([]),e=Object(s.a)(t,2),n=e[0],i=e[1],c=function(){for(var t=[],e=0;e<10;e++)t.push(Math.round(10*Math.random()));i(t)};return Object(a.useEffect)((function(){return c()}),[]),Object(m.jsx)("div",{className:"myLayout",children:Object(m.jsx)("div",{className:"coolThing",children:Object(m.jsxs)(v,{children:[Object(m.jsx)("h1",{children:"Dynamic SVG loader"}),Object(m.jsx)("button",{onClick:c,children:"update data"}),Object(m.jsx)(L,{data:n}),Object(m.jsx)("h1",{children:"Calculate in D3, Render in React"}),Object(m.jsx)(x,{data:H}),Object(m.jsx)("h1",{children:"Interactive tree"}),Object(m.jsx)(b,{})]})})})},P=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,182)).then((function(e){var n=e.getCLS,a=e.getFID,i=e.getFCP,c=e.getLCP,r=e.getTTFB;n(t),a(t),i(t),c(t),r(t)}))};r.a.render(Object(m.jsx)(i.a.StrictMode,{children:Object(m.jsx)(I,{})}),document.getElementById("root")),P()}},[[175,1,2]]]);
//# sourceMappingURL=main.6b7635f4.chunk.js.map